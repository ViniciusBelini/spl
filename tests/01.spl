import gui
import math

<int> window := gui.NewWindow("Counter - SPL", 200, 0)

function updateCounter(counter <int>, label <int>) <bool>
    gui.SetText(label, "Counter: " .. str(counter))

    return true
end

function main() <bool>
    global window

    <int> container := gui.NewContainer("vertical")
    <int> counter := 0

    <int> label := gui.NewLabel("Counter: 0")
    gui.Add(container, label)

    dynamic increment := (
        function()
            if counter < 10
                counter += 1
                updateCounter(counter, label)
            else
                gui.SetText(label, "Maximum reached!")
            end
        end
    )

    dynamic decrement := (
        function()
            if counter > 0
                counter -= 1
                updateCounter(counter, label)
            else
                gui.SetText(label, "Minimum reached!")
            end
        end
    )

    <int> buttonInc := gui.NewButton("+", increment)
    <int> buttonDec := gui.NewButton("-", decrement)

    gui.Add(container, buttonInc)
    gui.Add(container, buttonDec)

    gui.SetContent(window, container)
    gui.Show(window)

    return true
end

main()
